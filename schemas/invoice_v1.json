{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "invoice_v1",
  "title": "Invoice Extraction v1",
  "description": "Extract core invoice fields from text/OCR for downstream accounting workflows.",
  "type": "object",
  "additionalProperties": false,
  "required": ["invoice_id", "invoice_date", "vendor_name", "currency", "total_amount", "line_items"],
  "properties": {
    "invoice_id": { "type": "string", "minLength": 1, "maxLength": 64 },
    "invoice_date": { "type": "string", "pattern": "^\\d{4}-\\d{2}-\\d{2}$" },
    "vendor_name": { "type": "string", "minLength": 1, "maxLength": 200 },
    "currency": { "type": "string", "minLength": 3, "maxLength": 3 },
    "total_amount": { "type": "number", "minimum": 0 },
    "tax_amount": { "type": "number", "minimum": 0 },
    "due_date": { "type": "string", "pattern": "^\\d{4}-\\d{2}-\\d{2}$" },
    "line_items": {
      "type": "array",
      "minItems": 0,
      "maxItems": 100,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["description", "quantity", "unit_price", "amount"],
        "properties": {
          "description": { "type": "string", "minLength": 1, "maxLength": 300 },
          "quantity": { "type": "number", "minimum": 0 },
          "unit_price": { "type": "number", "minimum": 0 },
          "amount": { "type": "number", "minimum": 0 }
        }
      }
    },
    "confidence": { "type": "number", "minimum": 0, "maximum": 1 }
  }
}